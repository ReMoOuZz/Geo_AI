<div class="quiz-wrapper">
  <div class="quiz-card">
    <% @messages.each do |message| %>
      <% if message.role == "user" %>
        <div class="quiz-message user">
          <p><span class="fw-bold text-primary">Proposition</span>: <%= message.content.capitalize %></p>
        </div>
      <% elsif message.role == "assistant" %>
        <div class="quiz-message assistant">
          <p><%= message.content.html_safe %></p>
        </div>
      <% end %>
    <% end %>

    <div data-controller="actionquiz"
         data-actionquiz-total-value="<%= Quiz::TOTAL %>"
         data-actionquiz-messagesnumber-value="<%= @response_count %>">

      <%= simple_form_for [@chat, @user_message], html: { novalidate: false }, data:{ actionquiz_target: "form" } do |f| %>
        <div class="input-group mb-3">
          <%= f.input :content,
            placeholder: "Votre réponse...",
            wrapper: false,
            label: false,
            required: true,
            input_html: {
              class: "form-control ",
              data: { action: "keyup->actionquiz#enterValidation", actionquiz_target: "input" }
            } %>
          <%= f.button :submit, "Répondre", class:"btn btn-success", style: "color: white; font-weight: bold", wrapper: false  %>
        </div>
      <% end %>

      <div data-actionquiz-target="replace" class="d-none d-flex justify-content-center mt-3">
        <%= link_to "Résultats", quiz_path(@quiz),
        class: "text-white btn btn-primary rounded-3 p-3 fw-bold",
        data: { actionquiz_target: "result" }
        %>

      </div>
    </div>
  </div>
</div>
